---
layout: post
title: "NewPipe 0.20.0 released: Major version, new unified player, new notifications. More things."
short: "NewPipe 0.20.0 released"
date: 2020-10-04 05:00:00 +0100
categories: [pinned, release]
author: Opusforlife, Poolitzer and Allan Nordhøy
image: newpipe
excerpt_separator: <!-- more -->
---

Hey there! Back admittedly a bit late with this release, but for _very_ good reason. Ready? Sit down, grab the virtual popcorn and some hydration.
<!-- more -->

## A new unified player

"If the new player is the _unified player_, was the old one un-unified?" you ask. The new player is new, and it is unified.

Until now, NewPipe had a main, pop-up and background -player. All three had separate code and queues. Switching from one to another meant the old player and its queue closed itself, only to be recreated in a new one. That sounds complicated and cumbersome, because it is. Moreover, if instead of the using player buttons in the drop-down menu inside the player, you (accidentally) switched using the player buttons below the thumbnail, the stream would start anew instead of carrying on from where you left off. Losing your (possibly carefully built) queue was the bonus.

No more! There are no buttons in the player drop-down menu anymore, and the action buttons below the thumbnail now only do the job of being action buttons.
Everyone keeps their position _in the queue_. The utopia is here.

An equally complicated and cumbersome code rewrite lets all views use one common service. Switch from one player to another, and the service is at your service preserving the stream data, changing only the view. If anything your blood-pressure could drop _too low_. Ah, serendipity.

### Video details page

All is one. If you open the video details page you probably think there is going to be a thumbnail, video description, comments, etc.
Tapping the thumbnail would open the player in full-screen, hiding the rest of these elements. That is no way to live.
Imagine—if in portrait mode, the video plays right in the video details page. Raise your hands and say "the day has come". Believe.
NewPipe now comes equipped with a setting for 'Autoplay'. It can be enjoyed responsibly for automatic video play upon opening video details.
Such lavishness is of course off by default for mobile data, but works out of the box provided Wi-Fi compatible equipment is within reach.

### Video orientation

In the times of old, the main video player would always play videos full-screen regardless of the user's orientation. Great for video in the realm of wider than tall, if you were holding it right.
Somehow also great if held upright for perusers of vertical-video. Or, great for any user unconcerned with 90° viewing angles in either direction.
In the glory that is NewPipe 0.20.0, a full-screen button replaces the orientation-switch button. Is the video a good old-fashioned video, or some vertical nonsense? The player knows, and the player checks to see if the device is held the same way before going full-screen. If you have auto-rotate on, the button vanishes for regular videos, but will be to go from vertical video details, to full vertical video on the vertical. If you are into that sort of thing.

<video src="/img/smart_button.webm" poster="/img/0.20.0_thumbnail_smart_fullscreen.png" class="img-responsive no-flow screenshot-image" autoplay loop muted controls></video>

### Minimized player

Swipe down from the video details to minimize. This gives you the cutest little video, from which you can play, pause, or close down this little rascal pulling on your heartstrings. Browse away while the video stays put, or carries on. Without distractions like these, how do you really know the video you are watching is the best possible distraction from something else? In widescreen distraction, you can swipe down on the title to minimize. Other swipage in other areas still controls volume, brightness and gestures.
<video src="/img/landscape_swipe_down.webm" poster="/img/0.20.0_thumbnail_swipe_down.png" class="img-responsive" autoplay loop muted controls></video>
Minimizing the player instead of closing it means retaining your place in the video bread queue!
Example: Be supposed to be doing something else, watch a video instead, minimize it, then browse _the trending page_ (you insane person). Watch some filth from there, then quickly minimize it, and shudder. Now browse for some calming music, and finally watch a video about pandas.

If the player isn't closed (by using the cross button or swiping down on it), and instead stays minimized, you can tap "Back" to go through those videos in reverse order! You are making history, as the lead role of your own exploration. Pick videos for a quickly built video queue before watching.
Before this was only possible by using the background or pop-up player.

### Thumbnail progress bar

Bar progress, nail a thumb! If playing video in the background or in a pop-up, take note of the shiny progress bar underneath the thumbnail.
It updates in real time, with a little counter and a red bar. The audacity.
<img class="no-flow vertical" src="/img/screenshots/progress_bar.png"/>

This fine list of changes were made possible by the steadily awesome [@avently](https://github.com/avently). Let him live rent free in your head, as you bask in the fruits of his labour.

* * *

This massive, massive change to not only the code, but also the app's workflow, meant the PR had to be tested, reviewed and modified lots of times, over a long period of time. A huge thank you to [@avently](https://github.com/avently), for having the patience and dedication to keep adding features and bug-fixes until everyone was satisfied! A different person probably would have gone insane. And a big thank you to the maintainers for doggedly reviewing this gigantic PR repeatedly. Totalling ~6600 additions and ~5600 removals, the hat is off.

This evolution saw evolutionary bugs in its wake. [@avently](https://github.com/avently), with the help of [@blackbox87](https://github.com/blackbox87), [@Stypox](https://github.com/Stypox) and [@TobiGr](https://github.com/TobiGr) swatted as the reports came in. 

## The Notification is dead, long live the Notification!

As a pedant, you have noticed NewPipe's notification is different from most other media apps. It has the bar of progress, buttons in odd places, and a permanent, though tepid grey colour. Much of the difference is down to using an old API for notifications called RemoteView, _in the past_!

Enter the **Age of MediaStyle notification**:

This is a special notification type available for media apps since Android (5.0) Lollipop. In Oreo (8.0), it could colour-match its theme to the cover art of the music playing. Since Android 10, it has a SeekBar built in. It is a powerful API removing the need to use a whole bunch of custom code to achieve what was. Easier to maintain and improve. Win!

### Android 9

Android 9 is not Android 10, and there is now only a progress bar on 10. It makes sense to keep things managable by our small team. The old notification isn't even supported on Android 11 onwards. RemoteView notifications are out, MediaStyle is in.
Your sacrifice is not in vain:

### New features

Button up or button down, you get five **customisable** action buttons to control playback. Batteries not included. There is a new <code><img src="/img/icons/play_arrow-24dp.svg" /> notification</code> category in the app settings, from where you can pick actions and the buttons to carry out your bidding. Play/pause, forward/rewind, previous/next, shuffle, repeat, close, or even nothing! The decadency.

Three of these five buttons can be shown in the compact notification (remember that little arrow you use to expand/contract the notification?).

For the betrodden of **Android 8+**: Colours! Warm colours. Cool colours. All the colours! As noted above, MediaStyle notifications adapt to cover art colours. Big.

For the modern human using **Android 10+**: SeekBar! The old notification had a progress bar. Now you can actually seek from the notification itself. Marvel at the massive boost in convenience, and you shall find what you seek.

For the beyond human users of **Android 11**: Congratulations! You get a notification! NewPipe's media session shows up in the notification shade and in "Quick Settings", just as advertised. Enjoy the envy of the world.

<div class="media-row media-items-2">
<img class="no-flow img-responsive" style="align-self: center" src="/img/screenshots/notification_9.png"/>
<img class="no-flow vertical" src="/img/screenshots/notification_11.png"/>
</div>
This cool contribution, brought to you in original form by [@cool-student](https://github.com/cool-student). When ready to focus on this PR, no means of contact could be established, so [@wb9688](https://github.com/wb9688) and [@Stypox](https://github.com/Stypox) swooped in to save the day! [@wb9688](https://github.com/wb9688) updated the code to conform to our standards and coding style, and [@Stypox](https://github.com/Stypox) did the (painstaking!) work of rebasing the code after the unified player PR was merged into the development branch.

Ultimately, he took over the responsibility for this PR. He updated and polished the UI, fixed bugs, got everyone and their grandfather to test the changes, and pulled us to the finish line!

## Improvements

Take this moment to sip from the nectars of your beverage. [@TobiGr](https://github.com/TobiGr) lets you resize NewPipe provided it is possible in your environment.

Have you ever been sandwiched between sharing a URL to NewPipe, and a little "Unsupported URL" toast? Well, those URLs are still unsupported, but now the error message is great! It allows you to reshare the URL or just open it in a web-browser instead. All this, thanks to [@Stypox](https://github.com/Stypox) and [@webber-naut](https://github.com/webber-naut) for bringing this to our attention in the first place. 

Talking about sharing, when you share a live-stream with someone, NewPipe doesn't add a timestamp to the URL any more. This was done by [@nmurali94](https://github.com/nmurali94). Thanks :)

The header layout has improved: The alignment on the sides is consistent, and longer headings can expand to two lines.

The thing worse than searching while offline, or losing your connection to the Internet when doing it, is that NewPipe didn't let you type your search term.
Being rudely interrupted by a network error is a thing of the past. Type all you want, and accept defeat after the fact. Both of these changes brought to you by [@Stypox](https://github.com/Stypox). Thanks!

To save valuable mobile data, turning off video thumbnails and profile pictures for comments was already possible. Now even the black placeholders which replaced them are gone, and comments can comfortably take up the space left over. Thanks, [@4D17Y4](https://github.com/4D17Y4)!

[@TobiGr](https://github.com/TobiGr) brought two more improvements: The setting to remember pop-up size and position has a less redundant description, and when switching to another app, the main player now minimizes to play audio in the background by default. Seamless transition. Swoosh.

It is the current year, 2020, in higher resolution. Instead of having 360p everywhere, main player videos are opened in 720p at 60FPS, and pop-up ones in 480p. Thank you, [@B0pol](https://github.com/B0pol). NewPipe now also remembers what kind of media you downloaded last time, and will auto-select it when you hit "Download" on a new video. This was done by [@vmazoyer](https://github.com/vmazoyer).

Since 'Autoplay' is a new configurable setting in this release, [@opusforlife2](https://github.com/opusforlife2) changed the 'Autoplay' toggle in the video details to say "Auto-queue" instead. Now it's clearer what that toggle does without leaving room for confusion.

### More Translation updates and improvements

On the topic of language, you may find it improved in this release, and in other forms of written NewPipe material. [Allan Nordhøy](https://github.com/comradekingu) landed another pleasant and hopefully indistingishable effort. There was, as always, unmaintained walls leaning on room for improvement. The always wonderful translators have carried those improvements onto all languages and some in turn back into English.

Happily there are **new NewPipe languages** in this release: Sardinian, Bengali, Portuguese (Portugal), Neapolitan and Berber.

Improving matters is as easy as heading over to [Weblate](https://hosted.weblate.org/engage/newpipe/) to fix even the source strings.

## Fixes

Next to the now working offline search input, the actual text of the suggestions look better now. [@TobiGr](https://github.com/TobiGr) changed the colours to the NewPipe palette.

A spooky empty error report in certain kinds of crashes will no longer be empty, courtesy of [@Stypox](https://github.com/Stypox) taking care of properly calling the code. Yay, code! He also fixed a crash when NewPipe encounters an empty comment. Now it will be displayed just as empty as it is. Ding an sich.

Instead of causing a crash, thanks to [@wb9688](https://github.com/wb9688), you can open a video in the local playlist tab (and potentially other locations). Thanks to [@BoFFire](https://github.com/BoFFire), if you open the app in the Taqbaylit language, it goes by that name, and not `Tamaziɣt Taqbaylit`.

The license pop-up now lacks the ability to just disappear when you change orientation. This was fixed by [@nmurali94](https://github.com/nmurali94).
[@budde92](https://github.com/budde25) clicked enough keyboard to where you can now delete a file you just downloaded _and_ re-download it _without_ the app crashing. In what is a conundrum, we are not sure why you'd want to before now, but do.

[@mhmdanas](https://github.com/mhmdanas) changed a code call because its origin was redundant. Less redundancy good. When auto-queueing takes place, Newpipe wants to add a stream to the queue the moment you open a video. If no video suggestions were to be found on that page, that caused a crash. And then [@wb9688](https://github.com/wb9688) put an end to such shenanigans.

## Development

Development. The nerd magic sourced from the purest of autism. Embrace yourself:

- The extractor will ignore OTF streams now, since they don't work with progressive HTTP, and the extractor can't work with DASH just yet. This has been a major point of inconvenience for a lot of users (and us, too!) so we're eager to mitigate the problem until the proper fix sometime later. ([@wb9688](https://github.com/wb9688))

- A [Checkstyle](https://checkstyle.sourceforge.io/) rule was added to show an error when a local variable which could be `final` wasn't declared as such. ([@XiangRongLin](https://github.com/XiangRongLin))

- A library we use, PrettyTime, has been updated to a newer version so that a workaround can be removed from NewPipe's code. The performance improvement is a bonus! ([@B0pol](https://github.com/B0pol))

- Numbers and uppercase letters are now allowed in the app ID. ([@Stypox](https://github.com/Stypox))

- Contributors need to discuss their contributions prior to opening a PR now. ([@gkeegan](https://github.com/gkeegan))
	
- Some deprecations as well as a lot of code cleanup happened. ([@TacoTheDank](https://github.com/TacoTheDank))

- The code now prevents the YouTube website from accessing the available Java packages from NewPipe's parser. This removes a possible attack surface. ([@wb9688](https://github.com/wb9688))

## Where does one get outfitted with the latest in NewPipe?

NewPipe notifies you of new versions in a notification you can click to download it. An alternative is the [GitHub release page](https://github.com/TeamNewPipe/NewPipe/releases). If you use the [F-Droid app](https://f-droid.org/), you will be notified of all app news, including [NewPipe](https://f-droid.org/packages/org.schabi.newpipe/). Please keep in mind it can take F-Droid a while to update their repository. If you have problems installing you may need to uninstall NewPipe, and then reinstall it. (Make sure to back up you data.)

If you already had NewPipe installed through F-Droid's repository, to get this version of NewPipe you can do one of the following:
- Wait for F-Droid to ship the new NewPipe
- Switch to the NewPipe repository in F-Droid by following the [directions in the announcement]({% post_url 2020-05-30-f-droid-repo %}) (no need to remove any NewPipe installed from GitHub releases first).

Now that you are on NewPipe 0.20.0, please let us know what your experience is, especially bugs in need of fixing.
As usual, you can reach out via IRC ([#newpipe on freenode](https://webchat.freenode.net/?channels=newpipe)), [open issues on GitHub](https://github.com/TeamNewPipe/NewPipe/issues/new) or, ideally, use our built-in crash reporter to send in machine-readable issue reports.
You can even [send in fixes](https://github.com/TeamNewPipe/NewPipe/blob/dev/.github/CONTRIBUTING.md#bug-fixing) yourself.
Feel free to ask other questions in the comments here, and someone will reply.


esrh: new release is actually insane dude
schabi[m]: Holly sh** just startrd using thr new update.  ...you guys ROCK!!!
mhmdanas[m]: I'd like to donate
esrh: tfw community free software is functionally superior
